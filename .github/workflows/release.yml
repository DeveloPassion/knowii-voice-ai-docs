name: Create Release

on:
    workflow_dispatch:
        inputs:
            tag:
                description: 'Tag name (e.g., 1.0.0, 2024-01-15, release-candidate-1)'
                required: true
                type: string

permissions:
    contents: write

jobs:
    release:
        name: Create Tag and Release
        runs-on: ubuntu-latest
        steps:
            - name: Checkout repository
              uses: actions/checkout@v4
              with:
                  fetch-depth: 0

            - name: Configure Git
              run: |
                  git config user.name "github-actions[bot]"
                  git config user.email "github-actions[bot]@users.noreply.github.com"

            - name: Create and push tag
              run: |
                  git tag "${{ inputs.tag }}"
                  git push origin "${{ inputs.tag }}"

            - name: Create GitHub Release
              uses: actions/create-release@v1
              env:
                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
              with:
                  tag_name: ${{ inputs.tag }}
                  release_name: Release ${{ inputs.tag }}
                  draft: false
                  prerelease: false
